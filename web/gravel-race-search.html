<!--
  Gravel God Race Search — Embeddable in WordPress via shortcode [gravel_search].

  Loads race-index.json, renders filterable race cards with:
  - Tier-grouped collapsible sections (T1/T2 open, T3/T4 collapsed)
  - "Find Your Race" questionnaire with 7 sliders → match % ranking
  - Distance, elevation, tier, region, month filters
  - Mini radar chart SVGs + score breakdown dots
  - Links to race profile pages

  Self-contained: no React, no build step, vanilla JS + CSS.
-->
<div id="gg-race-search">
  <style>
    /* Self-hosted fonts — loaded from race page assets */
    @font-face {
      font-family: 'Sometype Mono';
      font-style: normal;
      font-weight: 400 700;
      font-display: swap;
      src: url('/race/assets/fonts/SometypeMono-normal-latin.woff2') format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
    @font-face {
      font-family: 'Source Serif 4';
      font-style: normal;
      font-weight: 400 700;
      font-display: swap;
      src: url('/race/assets/fonts/SourceSerif4-normal-latin.woff2') format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    /* Brand tokens */
    #gg-race-search {
      --gg-color-dark-brown: #3a2e25;
      --gg-color-primary-brown: #59473c;
      --gg-color-secondary-brown: #8c7568;
      --gg-color-tan: #d4c5b9;
      --gg-color-sand: #ede4d8;
      --gg-color-warm-paper: #f5efe6;
      --gg-color-gold: #B7950B;
      --gg-color-teal: #1A8A82;
      --gg-color-near-black: #1a1613;
      --gg-color-white: #ffffff;
      --gg-color-tier-1: #59473c;
      --gg-color-tier-2: #8c7568;
      --gg-color-tier-3: #999999;
      --gg-color-tier-4: #cccccc;
      --gg-font-data: 'Sometype Mono', monospace;
      --gg-font-editorial: 'Source Serif 4', Georgia, serif;
    }

    /* All selectors prefixed with #gg-race-search to beat WP theme specificity */
    #gg-race-search {
      font-family: var(--gg-font-data) !important;
      max-width: 1200px;
      margin: 0 auto;
      color: var(--gg-color-dark-brown) !important;
    }
    #gg-race-search *, #gg-race-search *::before, #gg-race-search *::after {
      border-radius: 0 !important;
      box-shadow: none !important;
      font-family: var(--gg-font-data) !important;
    }

    /* ── Questionnaire ── */
    #gg-race-search .gg-questionnaire {
      margin-bottom: 24px;
      border: 3px solid var(--gg-color-dark-brown);
    }
    #gg-race-search .gg-questionnaire-header {
      background: var(--gg-color-primary-brown) !important;
      color: var(--gg-color-white) !important;
      padding: 14px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      user-select: none;
    }
    #gg-race-search .gg-questionnaire-header h3 {
      margin: 0;
      font-size: 16px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--gg-color-white) !important;
    }
    #gg-race-search .gg-questionnaire-toggle {
      font-size: 18px;
      color: var(--gg-color-white) !important;
      transition: transform 0.2s;
    }
    #gg-race-search .gg-questionnaire-toggle.collapsed { transform: rotate(-90deg); }
    #gg-race-search .gg-questionnaire-body {
      padding: 20px;
      background: var(--gg-color-warm-paper) !important;
      border-top: 2px solid var(--gg-color-dark-brown);
    }
    #gg-race-search .gg-questionnaire-body.collapsed { display: none; }
    #gg-race-search .gg-slider-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px 32px;
    }
    #gg-race-search .gg-slider-row {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    #gg-race-search .gg-slider-label {
      font-size: 12px;
      font-weight: 700;
      color: var(--gg-color-dark-brown) !important;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    #gg-race-search .gg-slider-endpoints {
      display: flex;
      justify-content: space-between;
      font-size: 10px;
      color: var(--gg-color-secondary-brown) !important;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    #gg-race-search .gg-slider-row input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 6px;
      background: var(--gg-color-sand);
      outline: none;
      cursor: pointer;
      margin: 8px 0;
    }
    #gg-race-search .gg-slider-row input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 22px;
      height: 22px;
      background: var(--gg-color-primary-brown);
      border: 2px solid var(--gg-color-dark-brown);
      cursor: pointer;
    }
    #gg-race-search .gg-slider-row input[type="range"]::-moz-range-thumb {
      width: 22px;
      height: 22px;
      background: var(--gg-color-primary-brown);
      border: 2px solid var(--gg-color-dark-brown);
      border-radius: 0;
      cursor: pointer;
    }
    #gg-race-search .gg-slider-row input[type="range"]::-webkit-slider-runnable-track {
      height: 6px;
      background: var(--gg-color-sand);
    }
    #gg-race-search .gg-slider-row input[type="range"]::-moz-range-track {
      height: 6px;
      background: var(--gg-color-sand);
    }
    #gg-race-search .gg-questionnaire-actions {
      display: flex;
      gap: 12px;
      margin-top: 20px;
      align-items: center;
    }
    #gg-race-search .gg-btn-match {
      padding: 10px 24px;
      background: var(--gg-color-primary-brown) !important;
      color: var(--gg-color-white) !important;
      border: 3px solid var(--gg-color-primary-brown) !important;
      font-size: 13px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      cursor: pointer;
    }
    #gg-race-search .gg-btn-match:hover { background: var(--gg-color-secondary-brown) !important; border-color: var(--gg-color-secondary-brown) !important; }
    #gg-race-search .gg-btn-reset {
      padding: 10px 24px;
      background: var(--gg-color-white) !important;
      color: var(--gg-color-primary-brown) !important;
      border: 2px solid var(--gg-color-primary-brown) !important;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
    }
    #gg-race-search .gg-btn-reset:hover { background: var(--gg-color-primary-brown) !important; color: var(--gg-color-white) !important; }
    #gg-race-search .gg-match-badge {
      display: inline-block;
      padding: 2px 6px;
      font-size: 11px;
      font-weight: 700;
      background: var(--gg-color-near-black) !important;
      color: var(--gg-color-white) !important;
      border: 2px solid var(--gg-color-near-black) !important;
      white-space: nowrap;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* ── Filters ── */
    #gg-race-search .gg-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 24px;
      padding: 16px;
      background: var(--gg-color-warm-paper) !important;
      border: 2px solid var(--gg-color-dark-brown);
    }
    #gg-race-search .gg-filter-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
      min-width: 140px;
    }
    #gg-race-search .gg-filter-group label {
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: var(--gg-color-dark-brown) !important;
    }
    #gg-race-search .gg-filter-group select,
    #gg-race-search .gg-filter-group input {
      padding: 6px 8px;
      border: 2px solid var(--gg-color-dark-brown) !important;
      font-size: 13px;
      background: var(--gg-color-white) !important;
      color: var(--gg-color-dark-brown) !important;
    }
    #gg-race-search .gg-search-input {
      flex: 1;
      min-width: 200px;
    }
    #gg-race-search .gg-search-input input {
      width: 100%;
      padding: 8px 12px;
      font-size: 14px;
    }

    /* ── Results header ── */
    #gg-race-search .gg-results-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      font-size: 12px;
      color: var(--gg-color-dark-brown) !important;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    #gg-race-search button.gg-sort-btn {
      background: var(--gg-color-white) !important;
      color: var(--gg-color-dark-brown) !important;
      border: 2px solid var(--gg-color-dark-brown) !important;
      padding: 4px 10px;
      cursor: pointer;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    #gg-race-search button.gg-sort-btn.active {
      background: var(--gg-color-primary-brown) !important;
      color: var(--gg-color-white) !important;
      border-color: var(--gg-color-primary-brown) !important;
    }
    #gg-race-search button.gg-sort-btn:hover {
      background: var(--gg-color-primary-brown) !important;
      color: var(--gg-color-white) !important;
      border-color: var(--gg-color-primary-brown) !important;
    }

    /* ── Tier sections ── */
    #gg-race-search .gg-tier-section {
      margin-bottom: 24px;
      border: 3px solid var(--gg-color-dark-brown);
    }
    #gg-race-search .gg-tier-section-header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      cursor: pointer;
      user-select: none;
      background: var(--gg-color-warm-paper) !important;
      border-left: 6px solid var(--gg-color-dark-brown);
    }
    #gg-race-search .gg-tier-section-header.tier-1 { border-left-color: var(--gg-color-tier-1) !important; background: var(--gg-color-tier-1) !important; color: var(--gg-color-white) !important; }
    #gg-race-search .gg-tier-section-header.tier-1 h3 { color: var(--gg-color-white) !important; }
    #gg-race-search .gg-tier-section-header.tier-1 .gg-tier-section-count { color: var(--gg-color-tan) !important; }
    #gg-race-search .gg-tier-section-header.tier-1 .gg-tier-section-chevron { color: var(--gg-color-white) !important; }
    #gg-race-search .gg-tier-section-header.tier-2 { border-left-color: var(--gg-color-tier-2) !important; }
    #gg-race-search .gg-tier-section-header.tier-3 { border-left-color: var(--gg-color-tier-3) !important; }
    #gg-race-search .gg-tier-section-header.tier-4 { border-left-color: var(--gg-color-tier-4) !important; }
    #gg-race-search .gg-tier-section-title {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    #gg-race-search .gg-tier-section-title h3 {
      margin: 0;
      font-size: 14px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--gg-color-dark-brown) !important;
    }
    #gg-race-search .gg-tier-section-count {
      font-size: 11px;
      color: var(--gg-color-secondary-brown) !important;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    #gg-race-search .gg-tier-section-desc {
      font-family: var(--gg-font-editorial) !important;
      font-size: 11px; color: var(--gg-color-secondary-brown); margin: 4px 0 0 0;
      line-height: 1.5; font-weight: 400;
      width: 100%; flex-basis: 100%;
    }
    #gg-race-search .gg-tier-section-header.tier-1 .gg-tier-section-desc { color: var(--gg-color-tan); }
    #gg-race-search .gg-tier-section-chevron {
      font-size: 16px;
      color: var(--gg-color-dark-brown) !important;
      transition: transform 0.2s;
    }
    #gg-race-search .gg-tier-section-chevron.collapsed { transform: rotate(-90deg); }
    #gg-race-search .gg-tier-section-body {
      padding: 16px;
      background: var(--gg-color-warm-paper) !important;
      border-top: 2px solid var(--gg-color-dark-brown);
    }
    #gg-race-search .gg-tier-section-body.collapsed { display: none; }

    /* ── Card grid ── */
    #gg-race-search .gg-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
      gap: 16px;
    }
    #gg-race-search .gg-card {
      border: 2px solid var(--gg-color-dark-brown) !important;
      padding: 16px;
      background: var(--gg-color-warm-paper) !important;
    }
    #gg-race-search .gg-card:hover {
      background: var(--gg-color-sand) !important;
    }
    #gg-race-search .gg-card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 8px;
    }
    #gg-race-search a.gg-card-name,
    #gg-race-search span.gg-card-name {
      font-family: var(--gg-font-editorial) !important;
      font-size: 15px;
      font-weight: 700;
      color: var(--gg-color-dark-brown) !important;
      text-decoration: none !important;
      line-height: 1.2;
      letter-spacing: 0.5px;
    }
    #gg-race-search a.gg-card-name:hover { text-decoration: underline !important; color: var(--gg-color-dark-brown) !important; }
    #gg-race-search span.gg-card-name.no-link { cursor: default; }
    #gg-race-search span.gg-card-name.no-link:hover { text-decoration: none !important; }
    #gg-race-search .gg-tier-badge {
      display: inline-block;
      padding: 2px 8px;
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 1.5px;
      white-space: nowrap;
      text-transform: uppercase;
      border: 2px solid var(--gg-color-dark-brown) !important;
    }
    #gg-race-search .gg-tier-1 { background: var(--gg-color-near-black) !important; color: var(--gg-color-white) !important; }
    #gg-race-search .gg-tier-2 { background: var(--gg-color-warm-paper) !important; color: var(--gg-color-dark-brown) !important; border-color: var(--gg-color-dark-brown) !important; }
    #gg-race-search .gg-tier-3 { background: var(--gg-color-warm-paper) !important; color: var(--gg-color-tier-3) !important; border-color: var(--gg-color-tier-3) !important; }
    #gg-race-search .gg-tier-4 { background: var(--gg-color-warm-paper) !important; color: var(--gg-color-tier-4) !important; border-color: var(--gg-color-tier-4) !important; }
    #gg-race-search .gg-card-meta {
      font-size: 12px;
      color: var(--gg-color-secondary-brown) !important;
      margin-bottom: 8px;
    }
    #gg-race-search .gg-card-stats {
      display: flex;
      gap: 16px;
      font-size: 12px;
      margin-bottom: 8px;
    }
    #gg-race-search .gg-stat { display: flex; flex-direction: column; }
    #gg-race-search .gg-stat-val { font-weight: 700; font-size: 15px; color: var(--gg-color-dark-brown) !important; }
    #gg-race-search .gg-stat-label { font-size: 10px; color: var(--gg-color-secondary-brown) !important; text-transform: uppercase; letter-spacing: 1px; }
    #gg-race-search .gg-card-tagline {
      font-family: var(--gg-font-editorial) !important;
      font-size: 12px;
      color: var(--gg-color-secondary-brown) !important;
      font-style: italic;
      margin-top: 8px;
      line-height: 1.4;
    }

    /* ── Score bar + breakdown ── */
    #gg-race-search .gg-score-bar {
      margin-top: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      position: relative;
    }
    #gg-race-search .gg-score-track {
      flex: 1;
      height: 6px;
      background: var(--gg-color-sand) !important;
      border: 1px solid var(--gg-color-dark-brown);
      overflow: hidden;
    }
    #gg-race-search .gg-score-fill {
      height: 100%;
      transition: width 0.3s;
    }
    #gg-race-search .gg-score-num {
      font-size: 13px;
      font-weight: 700;
      min-width: 28px;
      text-align: right;
      color: var(--gg-color-dark-brown) !important;
    }
    #gg-race-search .gg-score-breakdown {
      display: none;
      margin-top: 8px;
      padding: 10px;
      background: var(--gg-color-warm-paper) !important;
      border: 2px solid var(--gg-color-dark-brown);
    }
    #gg-race-search .gg-score-breakdown.open { display: block; }
    #gg-race-search .gg-score-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4px 16px;
    }
    #gg-race-search .gg-score-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      padding: 2px 0;
    }
    #gg-race-search .gg-score-row-label { color: var(--gg-color-dark-brown) !important; text-transform: uppercase; letter-spacing: 0.5px; font-size: 10px; }
    #gg-race-search .gg-score-row-dots { display: flex; gap: 3px; }
    #gg-race-search .gg-score-dot {
      width: 8px;
      height: 8px;
      background: var(--gg-color-sand) !important;
      border: 1px solid var(--gg-color-dark-brown);
    }
    #gg-race-search .gg-score-dot.filled { background: var(--gg-color-dark-brown) !important; }
    #gg-race-search .gg-radar { margin-top: 8px; }

    /* ── Load more (per-tier) ── */
    #gg-race-search button.gg-load-more {
      display: block;
      width: 100%;
      padding: 10px;
      margin-top: 12px;
      background: var(--gg-color-warm-paper) !important;
      color: var(--gg-color-dark-brown) !important;
      border: 2px solid var(--gg-color-dark-brown) !important;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
    }
    #gg-race-search button.gg-load-more:hover { background: var(--gg-color-primary-brown) !important; color: var(--gg-color-white) !important; border-color: var(--gg-color-primary-brown) !important; }

    /* ── Active filter pills ── */
    #gg-race-search .gg-active-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
    }
    #gg-race-search .gg-filter-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 10px;
      background: var(--gg-color-primary-brown) !important;
      color: var(--gg-color-white) !important;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      border: 2px solid var(--gg-color-primary-brown) !important;
    }
    #gg-race-search .gg-filter-pill button {
      background: none !important;
      border: none !important;
      color: var(--gg-color-white) !important;
      cursor: pointer;
      padding: 0;
      font-size: 14px;
      line-height: 1;
      opacity: 0.7;
    }
    #gg-race-search .gg-filter-pill button:hover { opacity: 1; }
    #gg-race-search button.gg-clear-all {
      background: var(--gg-color-warm-paper) !important;
      border: 2px solid var(--gg-color-dark-brown) !important;
      color: var(--gg-color-dark-brown) !important;
      padding: 3px 10px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      cursor: pointer;
    }
    #gg-race-search button.gg-clear-all:hover { background: var(--gg-color-primary-brown) !important; color: var(--gg-color-white) !important; border-color: var(--gg-color-primary-brown) !important; }

    /* ── Widget footer ── */
    #gg-race-search .gg-widget-footer {
      margin-top: 32px;
      padding: 16px 20px;
      border: 2px solid var(--gg-color-dark-brown);
      background: var(--gg-color-primary-brown) !important;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 8px;
    }
    #gg-race-search .gg-widget-footer-brand {
      font-size: 11px;
      font-weight: 700;
      color: var(--gg-color-tan) !important;
      text-transform: uppercase;
      letter-spacing: 2px;
    }
    #gg-race-search .gg-widget-footer a {
      font-size: 11px;
      font-weight: 700;
      color: var(--gg-color-tan) !important;
      text-decoration: none !important;
      text-transform: uppercase;
      letter-spacing: 1.5px;
    }
    #gg-race-search .gg-widget-footer a:hover {
      color: var(--gg-color-white) !important;
      text-decoration: underline !important;
    }

    /* ── Methodology link in results header ── */
    #gg-race-search a.gg-methodology-link {
      font-size: 11px;
      color: var(--gg-color-secondary-brown) !important;
      text-decoration: none !important;
      letter-spacing: 0.5px;
    }
    #gg-race-search a.gg-methodology-link:hover {
      color: var(--gg-color-primary-brown) !important;
      text-decoration: underline !important;
    }

    /* ── No results ── */
    #gg-race-search .gg-no-results {
      text-align: center;
      padding: 40px;
      color: var(--gg-color-secondary-brown) !important;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* ── Mobile filter toggle ── */
    #gg-race-search button.gg-filter-toggle {
      display: none;
      width: 100%;
      padding: 10px;
      background: var(--gg-color-warm-paper) !important;
      border: 2px solid var(--gg-color-dark-brown) !important;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      margin-bottom: 12px;
      text-align: left;
      color: var(--gg-color-dark-brown) !important;
    }
    #gg-race-search button.gg-filter-toggle::after { content: ' ▾'; float: right; }
    #gg-race-search button.gg-filter-toggle.open::after { content: ' ▴'; }

    /* ── Match mode banner ── */
    #gg-race-search .gg-match-banner {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 16px;
      margin-bottom: 16px;
      background: var(--gg-color-primary-brown) !important;
      color: var(--gg-color-white) !important;
      border: 3px solid var(--gg-color-primary-brown) !important;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    #gg-race-search .gg-match-banner button {
      padding: 6px 14px;
      background: var(--gg-color-white) !important;
      color: var(--gg-color-primary-brown) !important;
      border: 2px solid var(--gg-color-white) !important;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
    }
    #gg-race-search .gg-match-banner button:hover { background: var(--gg-color-secondary-brown) !important; color: var(--gg-color-white) !important; border-color: var(--gg-color-secondary-brown) !important; }

    @media (max-width: 768px) {
      #gg-race-search .gg-grid { grid-template-columns: 1fr; }
      #gg-race-search button.gg-filter-toggle { display: block; }
      #gg-race-search .gg-filters { flex-direction: column; display: none; }
      #gg-race-search .gg-filters.open { display: flex; }
      #gg-race-search .gg-score-grid { grid-template-columns: 1fr; }
      #gg-race-search .gg-slider-grid { grid-template-columns: 1fr; }
      #gg-race-search .gg-questionnaire-header h3 { font-size: 13px; letter-spacing: 1px; }
      #gg-race-search .gg-questionnaire-body { padding: 14px; }
      #gg-race-search .gg-questionnaire-actions { flex-direction: column; align-items: stretch; }
      #gg-race-search .gg-btn-match, #gg-race-search .gg-btn-reset { text-align: center; }
      #gg-race-search .gg-results-header { flex-direction: column; gap: 8px; align-items: flex-start; }
      #gg-race-search .gg-tier-section-title h3 { font-size: 12px; letter-spacing: 1px; }
      #gg-race-search .gg-tier-section-header { padding: 10px 12px; }
      #gg-race-search .gg-tier-section-body { padding: 12px; }
      #gg-race-search .gg-card { padding: 12px; }
      #gg-race-search .gg-card-name { font-size: 13px; }
      #gg-race-search .gg-card-header { flex-direction: column; gap: 6px; }
      #gg-race-search .gg-match-banner { flex-direction: column; gap: 8px; text-align: center; }
    }
  </style>

  <!-- Questionnaire -->
  <div class="gg-questionnaire">
    <div class="gg-questionnaire-header" onclick="toggleQuestionnaire()">
      <h3>Find Your Perfect Race</h3>
      <span class="gg-questionnaire-toggle" id="gg-q-toggle">▾</span>
    </div>
    <div class="gg-questionnaire-body" id="gg-q-body">
      <div class="gg-slider-grid" id="gg-slider-grid"></div>
      <div class="gg-questionnaire-actions">
        <button class="gg-btn-match" onclick="runMatch()">Find My Races</button>
        <button class="gg-btn-reset" id="gg-btn-reset" style="display:none" onclick="resetMatch()">Back to Tiers</button>
      </div>
    </div>
  </div>

  <!-- Filters -->
  <button class="gg-filter-toggle" id="gg-filter-toggle" onclick="document.querySelector('.gg-filters').classList.toggle('open');this.classList.toggle('open')">Filters</button>
  <div class="gg-filters">
    <div class="gg-search-input">
      <label>Search</label>
      <input type="text" id="gg-search" placeholder="Race name or location...">
    </div>
    <div class="gg-filter-group">
      <label>Tier</label>
      <select id="gg-tier">
        <option value="">All Tiers</option>
        <option value="1">Tier 1</option>
        <option value="2">Tier 2</option>
        <option value="3">Tier 3</option>
      </select>
    </div>
    <div class="gg-filter-group">
      <label>Region</label>
      <select id="gg-region">
        <option value="">All Regions</option>
      </select>
    </div>
    <div class="gg-filter-group">
      <label>Distance</label>
      <select id="gg-distance">
        <option value="">Any Distance</option>
        <option value="0-50">Under 50 mi</option>
        <option value="50-100">50-100 mi</option>
        <option value="100-200">100-200 mi</option>
        <option value="200-999">200+ mi</option>
      </select>
    </div>
    <div class="gg-filter-group">
      <label>Month</label>
      <select id="gg-month">
        <option value="">Any Month</option>
      </select>
    </div>
    <div class="gg-filter-group">
      <label>Profile</label>
      <select id="gg-profile">
        <option value="">All</option>
        <option value="yes">Has Profile</option>
        <option value="no">No Profile</option>
      </select>
    </div>
  </div>

  <div class="gg-active-filters" id="gg-active-filters"></div>

  <div class="gg-results-header">
    <span id="gg-count"></span>
    <div style="display:flex;align-items:center;gap:16px">
      <a href="/race/methodology/" class="gg-methodology-link">How we rate &rsaquo;</a>
      <button class="gg-sort-btn active" data-sort="score">Score</button>
      <button class="gg-sort-btn" data-sort="name">Name</button>
      <button class="gg-sort-btn" data-sort="distance">Distance</button>
    </div>
  </div>

  <div id="gg-tier-container"></div>

  <div class="gg-widget-footer">
    <span class="gg-widget-footer-brand">Gravel God</span>
    <a href="/race/methodology/">How We Rate Races</a>
  </div>

  <script src="/wp-content/uploads/gravel-race-search.js"></script>
  <!-- JS extracted to external file to prevent WordPress from stripping inline scripts.
       Original inline <script> block was being removed by SiteGround Optimizer / AIOS / WP sanitization.
       Deploy: python3 scripts/push_wordpress.py --sync-widget -->
</div>
